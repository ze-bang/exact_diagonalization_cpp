# Exact Diagonalization Configuration File
# ==========================================
# This file demonstrates the configuration file format for ED calculations.
# All parameters can be overridden via command line.

[Diagonalization]
# Method: LANCZOS, FULL, mTPQ, cTPQ, ARPACK_SM, ARPACK_ADVANCED, CG, DAVIDSON, OSS
method = LANCZOS

# Number of eigenvalues to compute (use -1 or FULL for complete spectrum)
num_eigenvalues = 10

# Maximum iterations for iterative methods
max_iterations = 100000

# Convergence tolerance
tolerance = 1e-10

# Compute eigenvectors (true/false)
compute_eigenvectors = false

# Shift for shift-invert methods
shift = 0.0

# Block size for block methods
block_size = 10

# Maximum subspace size for Davidson
max_subspace = 100

[System]
# Number of lattice sites (auto-detected from positions.dat if not specified)
num_sites = 0

# Spin length (S=1/2 -> 0.5, S=1 -> 1.0, etc.)
spin_length = 0.5

# Sublattice size for spin measurements
sublattice_size = 1

# Directory containing Hamiltonian files (InterAll.dat, Trans.dat)
hamiltonian_dir = ./data

# Hamiltonian file names (if different from defaults)
# interaction_file = InterAll.dat
# single_site_file = Trans.dat

[Workflow]
# Output directory for results
output_dir = ./output

# Run standard (non-symmetrized) diagonalization
run_standard = true

# Run symmetrized diagonalization (exploits lattice symmetries)
run_symmetrized = false

# Compute thermodynamic properties
compute_thermo = false

# Skip ED calculation (useful for post-processing only)
skip_ed = false

[Thermal]
# Number of random samples for TPQ methods
num_samples = 10

# Temperature range (inverse temperature)
temp_min = 0.001
temp_max = 20.0

# Number of temperature bins for thermodynamic calculations
temp_bins = 100

# TPQ-specific parameters
num_order = 100              # Order/steps for cTPQ imaginary-time evolution
num_measure_freq = 100       # Measurement frequency
delta_tau = 0.01             # Time step for cTPQ
large_value = 1e5            # Large value for mTPQ

[Observable]
# Calculate custom observables from observables_*.dat files
calculate = false

# Measure spin expectations
measure_spin = false

# Spectral function parameters
omega_min = -10.0
omega_max = 10.0
num_points = 1000

# Time evolution parameters
t_end = 50.0
dt = 0.01

[ARPACK]
# Advanced ARPACK options (only used when method = ARPACK_ADVANCED)
verbose = false
which = SM                   # SM (smallest magnitude), LM (largest magnitude), SR, LR
ncv = -1                     # Number of Lanczos vectors (auto if -1)
max_restarts = 2             # Maximum number of restarts
ncv_growth = 1.5             # Growth factor for ncv
auto_enlarge_ncv = true      # Automatically enlarge ncv if needed
two_phase_refine = true      # Use two-phase refinement (relaxed then refined tolerance)
relaxed_tol = 1e-6           # Relaxed tolerance for first pass
shift_invert = false         # Use shift-invert mode
sigma = 0.0                  # Shift value
auto_switch_shift_invert = true  # Auto switch to shift-invert if standard fails
switch_sigma = 0.0           # Sigma for auto-switch
adaptive_inner_tol = true    # Adaptive inner tolerance for shift-invert
inner_tol_factor = 0.01      # Inner tolerance factor
inner_tol_min = 1e-14        # Minimum inner tolerance
inner_max_iter = 300         # Maximum inner iterations
