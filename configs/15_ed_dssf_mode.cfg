# =============================================================================
# ED DSSF MODE - Simplified Spectral Function Interface
# =============================================================================
#
# This config demonstrates the ED --dssf mode, which provides a TPQ_DSSF-style
# command-line interface for spectral function calculations.
#
# DSSF mode is a simpler alternative to config-file-based spectral calculations.
# It uses positional arguments and simple --dssf-* options instead of the full
# config file format.
#
# =============================================================================
# STEP 1: Generate eigenstates (run this config)
# =============================================================================
#
# First, run diagonalization to generate the ground state and save to HDF5:
#   ./ED configs/15_ed_dssf_mode.cfg
#
# =============================================================================

[System]
hamiltonian_dir = ./my_system
num_sites = 16
spin_length = 0.5
sublattice_size = 4
use_fixed_sz = true
n_up = 8

[Diagonalization]
method = LANCZOS
num_eigenvalues = 1                     # Ground state for T=0 calculations
tolerance = 1e-12
compute_eigenvectors = true             # REQUIRED for DSSF

[Output]
output_dir = ./my_system                # Same as hamiltonian_dir for DSSF mode


# =============================================================================
# STEP 2: Run DSSF mode (command-line examples)
# =============================================================================
#
# After generating eigenstates, use --dssf mode for spectral calculations.
# The DSSF mode reads from ed_results.h5 in the specified directory.
#
# -----------------------------------------------------------------------------
# BASIC SYNTAX
# -----------------------------------------------------------------------------
#
#   ./ED --dssf <directory> <krylov_dim> <spin_combinations> [options]
#
# Required arguments:
#   <directory>          Path to Hamiltonian directory (with ed_results.h5)
#   <krylov_dim>         Krylov subspace dimension (30-100 typical)
#   <spin_combinations>  "op1,op2;op3,op4" format
#
# Spin indices (ladder basis):  0=S+, 1=S-, 2=Sz
# Spin indices (xyz basis):     0=Sx, 1=Sy, 2=Sz
#
# -----------------------------------------------------------------------------
# DSSF OPTIONS
# -----------------------------------------------------------------------------
#
#   --dssf-method=<m>       Calculation method:
#                             spectral     - Single-state S(ω) (default)
#                             ftlm_thermal - Finite-T with FTLM sampling
#                             static       - Static S(q) vs T (SSSF)
#                             ground_state - T=0 continued fraction
#
#   --dssf-operator=<o>     Operator type:
#                             sum          - Standard Fourier (default)
#                             transverse   - Neutron spin-flip channel
#                             sublattice   - Sublattice-resolved
#                             experimental - Custom rotation
#
#   --dssf-basis=<b>        Spin basis: ladder (default) | xyz
#
#   --dssf-omega=<params>   Frequency grid: "omega_min,omega_max,bins,eta"
#                           Example: "-5.0,5.0,200,0.1"
#
#   --dssf-temps=<params>   Temperature range: "T_min,T_max,steps"
#                           Example: "0.1,10.0,20" (log-spaced)
#
#   --dssf-momentum=<pts>   Q-points in units of π: "Qx,Qy,Qz;..."
#                           Example: "0,0,0;0.5,0.5,0;1,0,0"
#
#   --dssf-samples=<n>      FTLM random samples (default: 40)
#
#   --dssf-polarization=<v> Polarization vector: "px,py,pz"
#                           Example: "1,-1,0" for (1,-1,0)/√2
#
#   --dssf-theta=<θ>        Rotation angle in radians for experimental mode
#
#   --dssf-sublattice=<n>   Unit cell size for sublattice operator
#
#   --dssf-gpu              Enable GPU acceleration
#
# -----------------------------------------------------------------------------
# EXAMPLE COMMANDS
# -----------------------------------------------------------------------------
#
# Example 1: Basic SzSz spectral function
#   ./ED --dssf ./my_system 50 "2,2"
#
# Example 2: SpSm and SzSz correlations with frequency range
#   ./ED --dssf ./my_system 50 "0,1;2,2" --dssf-omega="-5.0,5.0,200,0.05"
#
# Example 3: xyz basis with all diagonal components
#   ./ED --dssf ./my_system 50 "0,0;1,1;2,2" --dssf-basis=xyz
#
# Example 4: Finite-T DSSF with FTLM averaging
#   ./ED --dssf ./my_system 50 "2,2" --dssf-method=ftlm_thermal \
#        --dssf-temps=0.1,10.0,20 --dssf-samples=40
#
# Example 5: Static structure factor (SSSF) vs temperature
#   ./ED --dssf ./my_system 50 "0,0;1,1;2,2" --dssf-method=static \
#        --dssf-temps=0.01,5.0,50 --dssf-momentum="0,0,0;0.5,0.5,0;1,0,0"
#
# Example 6: Ground state T=0 DSSF
#   ./ED --dssf ./my_system 100 "0,1;2,2" --dssf-method=ground_state \
#        --dssf-omega=0.0,10.0,500,0.02
#
# Example 7: Transverse operator for neutron scattering
#   ./ED --dssf ./my_system 80 "0,0;1,1;2,2" --dssf-operator=transverse \
#        --dssf-basis=xyz --dssf-polarization=1,-1,0 \
#        --dssf-momentum="0,0,0;0.5,0.5,0.5"
#
# Example 8: GPU-accelerated calculation
#   ./ED --dssf ./my_system 100 "0,1;2,2" --dssf-method=ftlm_thermal \
#        --dssf-temps=0.1,5.0,30 --dssf-samples=50 --dssf-gpu
#
# Example 9: Multi-Q scan with high resolution
#   ./ED --dssf ./my_system 80 "2,2" --dssf-omega="-3.0,3.0,500,0.03" \
#        --dssf-momentum="0,0,0;0.25,0,0;0.5,0,0;0.75,0,0;1,0,0"
#
# =============================================================================
# COMPARISON: DSSF MODE vs CONFIG MODE
# =============================================================================
#
# Use DSSF mode when:
#   - Quick spectral calculation with default operators
#   - Parameter sweeps via shell scripts
#   - Simple command-line interface preferred
#   - Post-processing after initial diagonalization
#
# Use config mode when:
#   - Complex multi-step workflows
#   - Custom operator files required
#   - Integration with other ED features (symmetries, TPQ, etc.)
#   - Need full configurability
#
# Both modes produce output in the same HDF5 format (ed_results.h5).
#
# =============================================================================
# OUTPUT
# =============================================================================
#
# DSSF mode saves results to <directory>/ed_results.h5:
#
#   dynamical/                     # Spectral function results
#     <operator_name>/
#       frequencies                # ω array
#       spectral_real              # Re[S(ω)]
#       spectral_imag              # Im[S(ω)]
#       error_real                 # Error in Re[S(ω)]
#       error_imag                 # Error in Im[S(ω)]
#
#   correlations/                  # Static response results
#     <operator_name>/
#       temperatures               # T array
#       expectation                # ⟨O⟩(T)
#       susceptibility             # χ(T)
#
# =============================================================================
