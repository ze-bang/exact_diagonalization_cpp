# =============================================================================
# FINITE-TEMPERATURE DYNAMICAL STRUCTURE FACTOR (Finite-T DSSF)
# =============================================================================
#
# Computes S(q,ω,T) using thermal averaging with random sampling.
# Uses FTLM-like approach to compute thermal spectral functions.
#
# Usage: ./ED configs/11_dssf_finite_temperature.cfg
#
# =============================================================================

[System]
hamiltonian_dir = ./my_system
num_sites = 16
spin_length = 0.5
sublattice_size = 4
use_fixed_sz = true
n_up = 8

[Workflow]
compute_dynamical_response = true

[DynamicalResponse]
compute = true
thermal_average = true                  # Enable thermal averaging (finite T)
use_gpu = false                         # Use GPU acceleration (requires CUDA)

# Sampling parameters
num_samples = 40                        # Number of random states for thermal averaging
krylov_dim = 400                        # Krylov dimension for continued fraction
random_seed = 0                         # Random seed (0 = auto)

# Frequency grid
omega_min = -5.0                        # Minimum frequency (negative for energy loss)
omega_max = 5.0                         # Maximum frequency
num_omega_points = 2000                 # Number of frequency points

# Spectral broadening
broadening = 0.05                       # Lorentzian broadening η

# Temperature scan
temp_min = 0.01                         # Minimum temperature
temp_max = 2.0                          # Maximum temperature
num_temp_bins = 10                      # Number of temperature points (use 1 for single T)

# Two-operator correlation (optional)
compute_correlation = false             # Compute ⟨O1†O2⟩ instead of ⟨O†O⟩

# Legacy mode (use operator files directly instead of [Operators] section)
# operator_file = ./operators/Sq.dat
# operator2_file = ./operators/Sq_dag.dat

# Output file prefix
output_prefix = dynamical_response

[Operators]
# Operator type: sum | transverse | sublattice | experimental | transverse_experimental
operator_type = sum

# Spin basis: ladder | xyz
basis = xyz

# Operator pairs: SxSx, SySy, SzSz in xyz basis
spin_combinations = 0,0;1,1;2,2

# Momentum points in units of π
momentum_points = 0,0,0;0.5,0.5,0;1,0,0

# For sublattice operators
unit_cell_size = 4

# For transverse operators
polarization = 1,-1,0

# For experimental operators (radians)
theta = 0.0

[Output]
output_dir = ./output_dssf_finiteT
