# =============================================================================
# ED + TPQ_DSSF WORKFLOW - Step 1: Generate TPQ States
# =============================================================================
#
# Two-step workflow for finite-T spectroscopy:
#   Step 1: Run mTPQ to generate thermal states (this config)
#   Step 2: Run TPQ_DSSF binary to compute S(q,ω) for each state
#
# Usage:
#   Step 1: ./ED configs/13_tpq_dssf_workflow.cfg
#   Step 2: See TPQ_DSSF command examples below
#
# =============================================================================

[System]
hamiltonian_dir = ./my_system
num_sites = 16
spin_length = 0.5
sublattice_size = 4
use_fixed_sz = true
n_up = 8

[Diagonalization]
method = mTPQ

[TPQ]
num_samples = 10                        # Number of random samples
tpq_max_steps = 10000                   # Maximum evolution steps
tpq_measurement_interval = 100          # Save state every N steps
tpq_energy_shift = 1e5                  # Energy shift for normalization

# Temperature range (for output binning)
temp_min = 0.01
temp_max = 10.0
num_temp_bins = 100

[Output]
output_dir = ./output_mtpq_for_tpq_dssf


# =============================================================================
# STEP 2: SPECTRAL FUNCTION CALCULATION OPTIONS
# =============================================================================
#
# After running Step 1, compute S(q,ω) using EITHER:
#   Option A: TPQ_DSSF standalone binary
#   Option B: ED --dssf mode (simpler interface, same backend)
#
# =============================================================================
# OPTION A: TPQ_DSSF Binary
# =============================================================================
#
# Syntax:
#   ./TPQ_DSSF <directory> <krylov_dim> <spin_combinations> \
#       [method] [operator_type] [basis] [params] [unit_cell_size] \
#       [momentum_points] [polarization] [theta] [use_gpu] [n_up] [T_range] [samples]
#
# Methods:
#   krylov           - Time-domain C(t) using Krylov evolution
#   taylor           - Time-domain C(t) using Taylor expansion
#   spectral         - Frequency-domain S(ω) via continued fraction (single state)
#   spectral_thermal - Frequency-domain S(ω) with thermal averaging over TPQ states
#   ftlm_thermal     - FTLM with random sampling for finite-T S(ω,T)
#   static           - Static structure factor S(q) vs T (SSSF)
#   ground_state     - T=0 DSSF using continued fraction
#
# Operator Types:
#   sum              - Standard Fourier transform: S^α(q) = Σᵢ exp(iq·rᵢ) Sᵢ^α
#   transverse       - Project onto plane ⊥ to Q (neutron spin-flip channel)
#   sublattice       - Sublattice-resolved structure factors
#   experimental     - Custom rotation: cos(θ)Sz + sin(θ)Sx
#   transverse_experimental - Combined transverse + rotation
#
# Spin Basis:
#   ladder           - Sp (0), Sm (1), Sz (2)
#   xyz              - Sx (0), Sy (1), Sz (2)
#
# TPQ_DSSF EXAMPLES:
#
#   # Basic spectral function
#   ./TPQ_DSSF ./my_system 50 "2,2" spectral sum ladder "-5.0,5.0,200,0.1"
#
#   # FTLM thermal averaging
#   ./TPQ_DSSF ./my_system 50 "2,2" ftlm_thermal sum ladder \
#       "-5.0,5.0,200,0.1" 4 "0,0,0" "1,0,0" 0.0 0 8 "0.1,10.0,20" 40
#
#   # Static structure factor (SSSF)
#   ./TPQ_DSSF ./my_system 50 "0,0;1,1;2,2" static sum xyz \
#       "-5.0,5.0,200,0.1" 4 "0,0,0;0.5,0.5,0" "1,0,0" 0.0 0 8 "0.1,10.0,50" 40
#
#   # Ground state DSSF (T=0)
#   ./TPQ_DSSF ./my_system 100 "0,1;2,2" ground_state sum ladder \
#       "0.0,10.0,500,0.05" 4 "0,0,0;0.5,0.5,0.5"
#
# =============================================================================
# OPTION B: ED --dssf Mode (Recommended for simplicity)
# =============================================================================
#
# Syntax:
#   ./ED --dssf <directory> <krylov_dim> <spin_combinations> [options]
#
# Options:
#   --dssf-method=<m>       Method: spectral | ftlm_thermal | static | ground_state
#   --dssf-operator=<o>     Operator: sum | transverse | sublattice | experimental
#   --dssf-basis=<b>        Basis: ladder | xyz
#   --dssf-omega=<min,max,bins,eta>  Frequency grid and broadening
#   --dssf-temps=<min,max,steps>     Temperature range (log spacing)
#   --dssf-momentum=<Qx,Qy,Qz;...>   Momentum points (in units of π)
#   --dssf-samples=<n>      Number of FTLM random samples
#   --dssf-gpu              Enable GPU acceleration
#
# ED DSSF EXAMPLES:
#
#   # SzSz spectral function at Q=0
#   ./ED --dssf ./my_system 50 "2,2" --dssf-method=spectral
#
#   # Finite-T DSSF with FTLM averaging
#   ./ED --dssf ./my_system 50 "2,2" --dssf-method=ftlm_thermal \
#        --dssf-temps=0.1,10.0,20 --dssf-samples=40
#
#   # Static structure factor vs temperature
#   ./ED --dssf ./my_system 50 "0,0;1,1;2,2" --dssf-method=static \
#        --dssf-temps=0.01,5.0,50 --dssf-momentum="0,0,0;0.5,0.5,0"
#
#   # Ground state DSSF
#   ./ED --dssf ./my_system 100 "0,1;2,2" --dssf-method=ground_state \
#        --dssf-omega=0.0,10.0,500,0.05
#
# =============================================================================
#
# PARAMETER FORMATS:
#
# Spectral parameters: "omega_min,omega_max,num_points,broadening"
#   Example: "-5.0,5.0,200,0.1" = ω ∈ [-5,5], 200 points, η=0.1
#
# Temperature scan: "T_min,T_max,T_steps"
#   Example: "0.1,10.0,20" = 20 log-spaced points from T=0.1 to T=10
#
# Spin combinations: "op1,op2;op3,op4;..."
#   Example: "0,1;2,2" = SpSm and SzSz (ladder basis)
#   Example: "0,0;1,1;2,2" = SxSx, SySy, SzSz (xyz basis)
#
# Momentum points: "Qx1,Qy1,Qz1;Qx2,Qy2,Qz2;..." (in units of π)
#   Example: "0,0,0;1,0,0;1,1,0" = Γ, X, M points
#
# =============================================================================
