# =============================================================================
# ED + TPQ_DSSF WORKFLOW - Step 1: Generate TPQ States
# =============================================================================
#
# Two-step workflow for finite-T spectroscopy:
#   Step 1: Run mTPQ to generate thermal states (this config)
#   Step 2: Run TPQ_DSSF binary to compute S(q,ω) for each state
#
# Usage:
#   Step 1: ./ED configs/13_tpq_dssf_workflow.cfg
#   Step 2: See TPQ_DSSF command examples below
#
# =============================================================================

[System]
hamiltonian_dir = ./my_system
num_sites = 16
spin_length = 0.5
sublattice_size = 4
use_fixed_sz = true
n_up = 8

[Diagonalization]
method = mTPQ

[TPQ]
num_samples = 10                        # Number of random samples
tpq_max_steps = 10000                   # Maximum evolution steps
tpq_measurement_interval = 100          # Save state every N steps
tpq_energy_shift = 1e5                  # Energy shift for normalization

# Temperature range (for output binning)
temp_min = 0.01
temp_max = 10.0
num_temp_bins = 100

[Output]
output_dir = ./output_mtpq_for_tpq_dssf


# =============================================================================
# STEP 2: TPQ_DSSF Binary Usage
# =============================================================================
#
# After running Step 1, use the TPQ_DSSF binary to compute S(q,ω).
#
# Syntax:
#   mpirun -np <N> ./TPQ_DSSF <directory> <krylov_dim> <spin_combinations> \
#       [method] [operator_type] [basis] [params] [unit_cell_size] \
#       [momentum_points] [polarization] [theta] [use_gpu] [n_up] [T_range]
#
# Methods:
#   krylov           - Time-domain C(t) using Krylov evolution
#   taylor           - Time-domain C(t) using Taylor expansion
#   spectral         - Frequency-domain S(ω) via FTLM (single state)
#   spectral_thermal - Frequency-domain S(ω) with thermal averaging
#
# Operator Types:
#   sum              - Standard Fourier transform
#   transverse       - Polarization-dependent (neutron scattering)
#   sublattice       - Sublattice-resolved
#   experimental     - Custom rotation cos(θ)Sz + sin(θ)Sx
#
# Spin Basis:
#   ladder           - Sp (0), Sm (1), Sz (2)
#   xyz              - Sx (0), Sy (1), Sz (2)
#
# =============================================================================
#
# EXAMPLE COMMANDS:
#
# Basic krylov method (SpSm and SzSz correlations):
#   mpirun -np 4 ./TPQ_DSSF ./my_system 100 "0,1;2,2" krylov sum ladder "0.01,50.0"
#
# Spectral method with frequency range:
#   mpirun -np 4 ./TPQ_DSSF ./my_system 50 "0,1;2,2" spectral sum ladder "-5.0,5.0,200,0.1"
#
# Full thermal spectral with all options:
#   mpirun -np 4 ./TPQ_DSSF ./my_system 50 "0,0;1,1;2,2" spectral_thermal sum xyz \
#       "-5.0,5.0,200,0.1" 4 "0,0,0;0.5,0.5,0" "1,-1,0" 0.0 0 8 "0.1,5.0,10"
#
# GPU-accelerated:
#   mpirun -np 4 ./TPQ_DSSF ./my_system 100 "0,1;2,2" krylov sum ladder "0.01,50.0" \
#       4 "0,0,0" "1,-1,0" 0.0 1 8
#
# =============================================================================
#
# PARAMETER FORMATS:
#
# Time parameters (krylov/taylor): "dt,t_end"
#   Example: "0.01,50.0" = dt=0.01, t_end=50.0
#
# Spectral parameters (spectral/spectral_thermal): "omega_min,omega_max,num_points,broadening"
#   Example: "-5.0,5.0,200,0.1" = ω ∈ [-5,5], 200 points, η=0.1
#
# Temperature scan (spectral_thermal only): "T_min,T_max,T_steps"
#   Example: "0.1,10.0,10" = 10 log-spaced points from T=0.1 to T=10
#
# Spin combinations: "op1,op2;op3,op4;..."
#   Example: "0,1;2,2" = SpSm and SzSz (ladder basis)
#   Example: "0,0;1,1;2,2" = SxSx, SySy, SzSz (xyz basis)
#
# Momentum points: "Qx1,Qy1,Qz1;Qx2,Qy2,Qz2;..." (in units of π)
#   Example: "0,0,0;1,0,0;1,1,0" = Γ, X, M points
#
# =============================================================================
